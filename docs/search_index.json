[["geospatial-1.html", "Chapter 5 Geospatial 1 5.1 LAGOS Analysis 5.2 Assignment", " Chapter 5 Geospatial 1 Composed by Matt Ross 5.1 LAGOS Analysis 5.1.1 Loading in data 5.1.1.1 First download and then specifically grab the locus (or site lat longs) # #Lagos download script LAGOSNE::lagosne_get(dest_folder = LAGOSNE:::lagos_path()) ## Warning in LAGOSNE::lagosne_get(dest_folder = LAGOSNE:::lagos_path()): LAGOSNE data for this version already exists on the local machine. ## Re-download if neccessary using the &#39;overwrite` argument.&#39; # LAGOSNE compiled to C:\\Users\\13074\\AppData\\Local/LAGOSNE/LAGOSNE//data_1.087.3.qs #Load in lagos (Per instructions from LAGOS. see ?lagosne_load for details) lagos &lt;- lagosne_load() ## Warning in (function (version = NULL, fpath = NA) : LAGOSNE version unspecified, ## loading version: 1.087.3 #Grab the lake centroid info lake_centers &lt;- lagos$locus #load not working. #load(&#39;lake_centers.RData&#39;) #load(&#39;C:/Users/13074/Documents/ESS580/LAGOS/data/lake_centers.Rdata&#39;) 5.1.1.2 Convert to spatial data #Look at the column names #names(lake_centers) #Look at the structure #str(lake_centers) #View the full dataset, (1:100 is first row, 100 columns) #View(lake_centers %&gt;% slice(1:100)) # function st_as_sf is simple table and turn it into a simple feature, which is a spatial object. When using this, longitudes are &quot;x&quot;, lattitudes are &quot;y&quot; #st_transform Transform or convert coordinates of simple feature # crs is a EPSG projection code (google &quot;WGS 84 EPSG to get projection systems), 4326 is WGS 84 spatial_lakes &lt;- st_as_sf(lake_centers,coords=c(&#39;nhd_long&#39;,&#39;nhd_lat&#39;), crs=4326) %&gt;% st_transform(2163) #Subset for plotting subset_spatial &lt;- spatial_lakes %&gt;% slice(1:100) #??? #subset_baser &lt;- spatial_lakes[1:100,] #Dynamic mapviewer mapview(subset_spatial) 5.1.1.3 Subset to only Minnesota states &lt;- us_states() #Plot all the states to check if they loaded mapview(states) minnesota &lt;- states %&gt;% filter(name == &#39;Minnesota&#39;) %&gt;% st_transform(2163) #st_transform changes the projection #Subset lakes based on spatial position minnesota_lakes &lt;- spatial_lakes[minnesota,] #Plotting the first 1000 lakes minnesota_lakes %&gt;% arrange(-lake_area_ha) %&gt;% slice(1:1000) %&gt;% mapview(.,zcol = &#39;lake_area_ha&#39;) 5.2 Assignment 5.2.1 Question 1: Show a map outline of Iowa and Illinois (similar to Minnesota map upstream) #subsetting Iowa and Illinois iowa_illinois &lt;- states %&gt;% filter(name %in% c(&#39;Iowa&#39;, &#39;Illinois&#39;)) %&gt;% st_transform(2163) # map mapview(iowa_illinois) 5.2.2 Question 2: Subset LAGOS data to these sites, how many sites are in Illinois and Iowa combined? How does this compare to Minnesota? Combined, Iowa and Illinois have 16466 lakes, while Minnesota has an additional 12572 lakes for a total of 29038 lakes by itself. # subsetting LAGOS data for Iowa and Illinois ia_il_lakes &lt;- spatial_lakes[iowa_illinois,] # Counting obeservations in the two dfs nrow(ia_il_lakes) ## [1] 16466 nrow(minnesota_lakes) ## [1] 29038 nrow(minnesota_lakes)-nrow(ia_il_lakes) ## [1] 12572 5.2.3 Question 3: What is the distribution of lake size in Iowa vs. Minnesota? Here I want to see a histogram plot with lake size on x-axis and frequency on y axis (check out geom_histogram) Minnesota has a much larger distribution of lakes at all sizes than Iowa, with the largest lakes being nearly five times the largest size of Iowa. # Using st_join to join the spatial object and sf dataframes. # subsetting states ia_mn &lt;- states %&gt;% filter(name %in% c(&#39;Iowa&#39;, &#39;Minnesota&#39;)) %&gt;% st_transform(2163) # joining the two ia_mn_lakes &lt;- st_join(spatial_lakes, ia_mn) %&gt;% filter(!is.na(name)) # Plot the two states ggplot(ia_mn_lakes,aes(lake_area_ha, fill = name, color = name)) + geom_histogram(alpha = 0.8) + facet_wrap(~name) + scale_x_log10() + theme_base() + xlab(&quot;Lake Area (ha)&quot;) + ylab(&quot;Count&quot;) 5.2.4 Question 4: Make an interactive plot of lakes in Iowa and Illinois and color them by lake area in hectares Plot shows the largest 500 lakes according to size (ha) in Iowa and Illinois. #Plotting the top 500 largest lakes by hectares ia_il_lakes %&gt;% arrange(-lake_area_ha) %&gt;% slice(1:500) %&gt;% mapview(.,zcol = &#39;lake_area_ha&#39;, layer.name = &quot;Lakes (ha)&quot;) 5.2.5 Question 5: What other data sources might we use to understand how reservoirs and natural lakes vary in size in these three states? Lakes vary in size (both in terms of surface area and volume) over time. Each of the three states Department of Natural Resources are responsible for the maintenance of water body data. Additionally, the USGSs Water Resources Mission Area had spatial data related to reservoir and lake size, as well as the NWIS Mapper and NSDI Water Node. The EPAs LAKECAT seems to have related data too. "]]
