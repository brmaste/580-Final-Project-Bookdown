<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Hayman Fire Recovery | 580 Final Project Bookdown</title>
  <meta name="description" content="Chapter 3 Hayman Fire Recovery | 580 Final Project Bookdown" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Hayman Fire Recovery | 580 Final Project Bookdown" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Hayman Fire Recovery | 580 Final Project Bookdown" />
  
  
  

<meta name="author" content="Brian Steen" />


<meta name="date" content="2022-03-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="discharge-data-example.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">580 Final Project Bookdown</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a></li>
<li class="chapter" data-level="2" data-path="discharge-data-example.html"><a href="discharge-data-example.html"><i class="fa fa-check"></i><b>2</b> Discharge Data Example<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="discharge-data-example.html"><a href="discharge-data-example.html#sitedescription"><i class="fa fa-check"></i><b>2.1</b> SiteDescription<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="discharge-data-example.html"><a href="discharge-data-example.html#data-acquisition-and-plotting-tests"><i class="fa fa-check"></i><b>2.2</b> Data Acquisition and Plotting tests<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="discharge-data-example.html"><a href="discharge-data-example.html#data-download"><i class="fa fa-check"></i><b>2.2.1</b> Data Download<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="discharge-data-example.html"><a href="discharge-data-example.html#static-data-plotter"><i class="fa fa-check"></i><b>2.2.2</b> Static Data Plotter<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="discharge-data-example.html"><a href="discharge-data-example.html#interactive-data-plotter"><i class="fa fa-check"></i><b>2.2.3</b> Interactive Data Plotter<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="discharge-data-example.html"><a href="discharge-data-example.html#dygraph-example"><i class="fa fa-check"></i><b>2.3</b> DyGraph example<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="discharge-data-example.html"><a href="discharge-data-example.html#poudre-paragraph"><i class="fa fa-check"></i><b>2.4</b> Poudre Paragraph<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="discharge-data-example.html"><a href="discharge-data-example.html#presentation-version-link"><i class="fa fa-check"></i><b>2.5</b> Presentation Version Link<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html"><i class="fa fa-check"></i><b>3</b> Hayman Fire Recovery<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#question-1"><i class="fa fa-check"></i><b>3.1</b> Question 1:<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#question-2"><i class="fa fa-check"></i><b>3.2</b> Question 2:<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#question-3"><i class="fa fa-check"></i><b>3.3</b> Question 3:<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#question-4"><i class="fa fa-check"></i><b>3.4</b> Question 4:<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#question-5"><i class="fa fa-check"></i><b>3.5</b> Question 5:<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#bonus-question"><i class="fa fa-check"></i><b>3.6</b> Bonus Question:<span></span></a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#spread"><i class="fa fa-check"></i><b>3.6.1</b> Spread<span></span></a></li>
<li class="chapter" data-level="3.6.2" data-path="hayman-fire-recovery.html"><a href="hayman-fire-recovery.html#gather"><i class="fa fa-check"></i><b>3.6.2</b> Gather<span></span></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">580 Final Project Bookdown</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hayman-fire-recovery" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Hayman Fire Recovery<a href="hayman-fire-recovery.html#hayman-fire-recovery" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="hayman-fire-recovery.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="hayman-fire-recovery.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb2-3"><a href="hayman-fire-recovery.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb2-4"><a href="hayman-fire-recovery.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb2-5"><a href="hayman-fire-recovery.html#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="hayman-fire-recovery.html#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Now that we have learned how to munge (manipulate) data</span></span>
<span id="cb2-7"><a href="hayman-fire-recovery.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># and plot it, we will work on using these skills in new ways</span></span>
<span id="cb2-8"><a href="hayman-fire-recovery.html#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="hayman-fire-recovery.html#cb2-9" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_knit<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir=</span><span class="st">&#39;..&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="hayman-fire-recovery.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">####---- Reading in Data and Stacking it -----####</span></span>
<span id="cb3-2"><a href="hayman-fire-recovery.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Reading in files</span></span>
<span id="cb3-3"><a href="hayman-fire-recovery.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#I couldn&#39;t knit this with the pathway used, so I used the entire file pathway</span></span>
<span id="cb3-4"><a href="hayman-fire-recovery.html#cb3-4" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&#39;C:/Users/13074/Documents/ESS580/2_fire_data_wrangle/data&#39;</span>,<span class="at">full.names=</span>T)</span>
<span id="cb3-5"><a href="hayman-fire-recovery.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="hayman-fire-recovery.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Read in individual data files</span></span>
<span id="cb3-7"><a href="hayman-fire-recovery.html#cb3-7" aria-hidden="true" tabindex="-1"></a>ndmi <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(files[<span class="dv">1</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb3-8"><a href="hayman-fire-recovery.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">burned=</span><span class="dv">2</span>,<span class="at">unburned=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="hayman-fire-recovery.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data=</span><span class="st">&#39;ndmi&#39;</span>)</span>
<span id="cb3-10"><a href="hayman-fire-recovery.html#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="hayman-fire-recovery.html#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="hayman-fire-recovery.html#cb3-12" aria-hidden="true" tabindex="-1"></a>ndsi <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(files[<span class="dv">2</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb3-13"><a href="hayman-fire-recovery.html#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">burned=</span><span class="dv">2</span>,<span class="at">unburned=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="hayman-fire-recovery.html#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data=</span><span class="st">&#39;ndsi&#39;</span>)</span>
<span id="cb3-15"><a href="hayman-fire-recovery.html#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="hayman-fire-recovery.html#cb3-16" aria-hidden="true" tabindex="-1"></a>ndvi <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(files[<span class="dv">3</span>])<span class="sc">%&gt;%</span> </span>
<span id="cb3-17"><a href="hayman-fire-recovery.html#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">burned=</span><span class="dv">2</span>,<span class="at">unburned=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="hayman-fire-recovery.html#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data=</span><span class="st">&#39;ndvi&#39;</span>)</span>
<span id="cb3-19"><a href="hayman-fire-recovery.html#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="hayman-fire-recovery.html#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack as a tidy dataset</span></span>
<span id="cb3-21"><a href="hayman-fire-recovery.html#cb3-21" aria-hidden="true" tabindex="-1"></a>full_long <span class="ot">&lt;-</span> <span class="fu">rbind</span>(ndvi,ndmi,ndsi) <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="hayman-fire-recovery.html#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key=</span><span class="st">&#39;site&#39;</span>,<span class="at">value=</span><span class="st">&#39;value&#39;</span>,<span class="sc">-</span>DateTime,<span class="sc">-</span>data) <span class="sc">%&gt;%</span></span>
<span id="cb3-23"><a href="hayman-fire-recovery.html#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value))</span></code></pre></div>
<div id="question-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Question 1:<a href="hayman-fire-recovery.html#question-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What is the correlation between NDVI and NDMI? - here I want you to
convert the full_long dataset in to a wide dataset using the
function “spread” and then make a plot that shows the correlation s a
function of if the site was burned or not (x axis should be ndmi)
You should exclude winter months and focus on summer months</p>
<p><em>When the NDMI value increases, the NDVI increases as well. While the NDMI was at or below zero for most of the burned site, the NDVI largely does not extend past 0.35. In contrast, NDMI values begin below 0 for the unburned site and extends to about 0.2, with NDVI values ranging between 0.35 and 0.55. The figure suggests that unburned site with its higher vegetation index is able to retain moisture better than the burned site.</em></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="hayman-fire-recovery.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Converts the long format to wide, removes the resulting NAs from the df. </span></span>
<span id="cb4-2"><a href="hayman-fire-recovery.html#cb4-2" aria-hidden="true" tabindex="-1"></a>full_wide <span class="ot">&lt;-</span> <span class="fu">spread</span>(full_long, data, value) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="hayman-fire-recovery.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_if</span>(is.numeric, <span class="fu">all_vars</span>(<span class="sc">!</span><span class="fu">is.na</span>(.)))</span>
<span id="cb4-4"><a href="hayman-fire-recovery.html#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="hayman-fire-recovery.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter for summer months only</span></span>
<span id="cb4-6"><a href="hayman-fire-recovery.html#cb4-6" aria-hidden="true" tabindex="-1"></a>summer_fw <span class="ot">&lt;-</span> full_wide <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="hayman-fire-recovery.html#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(DateTime), <span class="at">year =</span> <span class="fu">year</span>(DateTime)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="hayman-fire-recovery.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</span>
<span id="cb4-9"><a href="hayman-fire-recovery.html#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="hayman-fire-recovery.html#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summer_fw, <span class="fu">aes</span>(<span class="at">x=</span> ndmi, <span class="at">y=</span> ndvi, <span class="at">color =</span> site)) <span class="sc">+</span></span>
<span id="cb4-11"><a href="hayman-fire-recovery.html#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb4-12"><a href="hayman-fire-recovery.html#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_base</span>() <span class="sc">+</span></span>
<span id="cb4-13"><a href="hayman-fire-recovery.html#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.8</span>,<span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb4-14"><a href="hayman-fire-recovery.html#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&#39;NDMI&#39;</span>, <span class="at">y=</span><span class="st">&quot;NDVI&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
<div id="question-2" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Question 2:<a href="hayman-fire-recovery.html#question-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol start="2" style="list-style-type: decimal">
<li>What is the correlation between average NDSI (normalized
snow index) for January - April and average NDVI for June-August?
In other words, does the previous year’s snow cover influence vegetation
growth for the following summer?</li>
</ol>
<p><em>Both sites demonstrate relatively flat trends between average winter NDSI and average summer NDVI. The difference between the two sites suggests that the amount of winter snow is not as important as a site having enough vegetation to sustain a higher summer NDVI.</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="hayman-fire-recovery.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#For this, I want average NDSI for Jan-Apr, and average NDVI for Jun-Aug</span></span>
<span id="cb5-2"><a href="hayman-fire-recovery.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Winter</span></span>
<span id="cb5-3"><a href="hayman-fire-recovery.html#cb5-3" aria-hidden="true" tabindex="-1"></a>winter_ndsi <span class="ot">&lt;-</span> <span class="fu">select</span>(full_wide, <span class="st">&quot;DateTime&quot;</span>, <span class="st">&quot;site&quot;</span>, <span class="st">&quot;ndsi&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="hayman-fire-recovery.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(DateTime), <span class="at">year =</span> <span class="fu">year</span>(DateTime)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="hayman-fire-recovery.html#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="hayman-fire-recovery.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(site, year) <span class="sc">%&gt;%</span> </span>
<span id="cb5-7"><a href="hayman-fire-recovery.html#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ave_ndsi =</span> <span class="fu">mean</span>(ndsi))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;site&#39;. You can override using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="hayman-fire-recovery.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#summer</span></span>
<span id="cb7-2"><a href="hayman-fire-recovery.html#cb7-2" aria-hidden="true" tabindex="-1"></a>summer_ndvi <span class="ot">&lt;-</span> <span class="fu">select</span>(full_wide, <span class="st">&quot;DateTime&quot;</span>, <span class="st">&quot;site&quot;</span>, <span class="st">&quot;ndvi&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="hayman-fire-recovery.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(DateTime), <span class="at">year =</span> <span class="fu">year</span>(DateTime)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="hayman-fire-recovery.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="hayman-fire-recovery.html#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(site, year) <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="hayman-fire-recovery.html#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ave_ndvi =</span> <span class="fu">mean</span>(ndvi))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;site&#39;. You can override using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="hayman-fire-recovery.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Joining them together</span></span>
<span id="cb9-2"><a href="hayman-fire-recovery.html#cb9-2" aria-hidden="true" tabindex="-1"></a>winter_summer <span class="ot">&lt;-</span> <span class="fu">left_join</span>(winter_ndsi, summer_ndvi)</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;site&quot;, &quot;year&quot;)</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="hayman-fire-recovery.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(winter_summer, <span class="fu">aes</span>(<span class="at">x=</span> ave_ndsi, <span class="at">y=</span> ave_ndvi, <span class="at">color =</span> site)) <span class="sc">+</span></span>
<span id="cb11-2"><a href="hayman-fire-recovery.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb11-3"><a href="hayman-fire-recovery.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_base</span>() <span class="sc">+</span></span>
<span id="cb11-4"><a href="hayman-fire-recovery.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-5"><a href="hayman-fire-recovery.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.85</span>,<span class="fl">0.3</span>)) <span class="sc">+</span></span>
<span id="cb11-6"><a href="hayman-fire-recovery.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&#39;Average NDSI&#39;</span>, <span class="at">y=</span><span class="st">&quot;Average NDVI&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="question-3" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Question 3:<a href="hayman-fire-recovery.html#question-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>How is the snow effect from question 2 different between pre- and post-burn
and burned and unburned?</p>
<p><em>At both sites, the average winter NDSI had little effect upon NDVI. After the fire, the burned site no longer had any vegetation to sustain, regardless of NDSI, so the NDVI is lower than the unburned site.</em></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="hayman-fire-recovery.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Want a facet wrap of the previous data splitting the difference between pre/post fire</span></span>
<span id="cb13-2"><a href="hayman-fire-recovery.html#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="hayman-fire-recovery.html#cb13-3" aria-hidden="true" tabindex="-1"></a>pre_post_winter_summer <span class="ot">&lt;-</span> winter_summer <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="hayman-fire-recovery.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pre_post =</span> <span class="fu">ifelse</span>(year <span class="sc">&lt;</span><span class="dv">2002</span>, <span class="st">&quot;Before Burn&quot;</span>, <span class="st">&quot;Post Burn&quot;</span>))</span>
<span id="cb13-5"><a href="hayman-fire-recovery.html#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="hayman-fire-recovery.html#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pre_post_winter_summer, <span class="fu">aes</span>(<span class="at">x=</span> ave_ndsi, <span class="at">y=</span> ave_ndvi, <span class="at">color =</span> site)) <span class="sc">+</span></span>
<span id="cb13-7"><a href="hayman-fire-recovery.html#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-8"><a href="hayman-fire-recovery.html#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_base</span>() <span class="sc">+</span></span>
<span id="cb13-9"><a href="hayman-fire-recovery.html#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>pre_post) <span class="sc">+</span></span>
<span id="cb13-10"><a href="hayman-fire-recovery.html#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&#39;Average NDSI&#39;</span>, <span class="at">y=</span><span class="st">&quot;Average NDVI&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="question-4" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Question 4:<a href="hayman-fire-recovery.html#question-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What month is the greenest month on average?</p>
<p><em>For the period of record for both sites, August is the greenest month with September not lagging far behind.</em></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="hayman-fire-recovery.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mutate by month, then find the average NDVI. Bar chart. </span></span>
<span id="cb14-2"><a href="hayman-fire-recovery.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="hayman-fire-recovery.html#cb14-3" aria-hidden="true" tabindex="-1"></a>green_fw <span class="ot">&lt;-</span> full_wide <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="hayman-fire-recovery.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(DateTime, <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-5"><a href="hayman-fire-recovery.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> </span>
<span id="cb14-6"><a href="hayman-fire-recovery.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">green=</span> <span class="fu">mean</span>(ndvi))</span>
<span id="cb14-7"><a href="hayman-fire-recovery.html#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="hayman-fire-recovery.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(green_fw, <span class="fu">aes</span>(<span class="at">x=</span> month, <span class="at">y=</span> green)) <span class="sc">+</span></span>
<span id="cb14-9"><a href="hayman-fire-recovery.html#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">width=</span><span class="fl">0.5</span>, <span class="at">fill=</span><span class="st">&quot;dark green&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-10"><a href="hayman-fire-recovery.html#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_base</span>() <span class="sc">+</span></span>
<span id="cb14-11"><a href="hayman-fire-recovery.html#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&#39;Month&#39;</span>, <span class="at">y=</span><span class="st">&quot;Average NDVI&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="question-5" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Question 5:<a href="hayman-fire-recovery.html#question-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What month is the snowiest on average?</p>
<p><em>January on average is the snowiest month for the period of record.</em></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="hayman-fire-recovery.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Mutate by month, then find the average NDSI. Bar chart. </span></span>
<span id="cb15-2"><a href="hayman-fire-recovery.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="hayman-fire-recovery.html#cb15-3" aria-hidden="true" tabindex="-1"></a>snow_fw <span class="ot">&lt;-</span> full_wide <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="hayman-fire-recovery.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(DateTime, <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="hayman-fire-recovery.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> </span>
<span id="cb15-6"><a href="hayman-fire-recovery.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">snow=</span> <span class="fu">mean</span>(ndsi <span class="sc">&gt;</span> <span class="dv">0</span>))</span>
<span id="cb15-7"><a href="hayman-fire-recovery.html#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="hayman-fire-recovery.html#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(snow_fw, <span class="fu">aes</span>(<span class="at">x=</span> month, <span class="at">y=</span> snow)) <span class="sc">+</span></span>
<span id="cb15-9"><a href="hayman-fire-recovery.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">width=</span><span class="fl">0.5</span>, <span class="at">fill=</span><span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="hayman-fire-recovery.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_base</span>() <span class="sc">+</span></span>
<span id="cb15-11"><a href="hayman-fire-recovery.html#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&#39;Month&#39;</span>, <span class="at">y=</span><span class="st">&quot;Average NDSI&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="bonus-question" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Bonus Question:<a href="hayman-fire-recovery.html#bonus-question" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Redo all problems with <code>spread</code> and <code>gather</code> using modern tidyverse syntax.</p>
<p><em>Gather was initially used when reading in and stacking data, while spread was used in Question 1. The pertinent lines of code are replaced below:</em></p>
<div id="spread" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Spread<a href="hayman-fire-recovery.html#spread" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Spread to pivot_wider:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="hayman-fire-recovery.html#cb16-1" aria-hidden="true" tabindex="-1"></a>full_wider <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(full_long, <span class="at">names_from =</span> data, <span class="at">values_from =</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="hayman-fire-recovery.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_if</span>(is.numeric, <span class="fu">all_vars</span>(<span class="sc">!</span><span class="fu">is.na</span>(.)))</span></code></pre></div>
</div>
<div id="gather" class="section level3 hasAnchor" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Gather<a href="hayman-fire-recovery.html#gather" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Gather to pivot_longer:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="hayman-fire-recovery.html#cb17-1" aria-hidden="true" tabindex="-1"></a>full_long2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(ndvi,ndmi,ndsi) <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="hayman-fire-recovery.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(burned<span class="sc">:</span>unburned, <span class="at">names_to =</span><span class="st">&#39;site&#39;</span>, <span class="at">values_to=</span><span class="st">&#39;value&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="hayman-fire-recovery.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value))</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="discharge-data-example.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/brmaste/580-Final-Project-Bookdown/edit/master/03-race.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/brmaste/580-Final-Project-Bookdown/blob/master/03-race.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
